<!DOCTYPE html>
<html>
<head>
	<title>Sorting System</title>
	<style>
		form{
	        margin: 20px 10px;
	    }

	    #uID{
	    	width: 40px;


	    }

	    input[type=button]{
	    	border-radius: 5px;
	    	width: 40px;
	    	background-color: white;

	    }

	    form input, button, select, option{
	        padding: 5px;
	        text-align: center;
	        border: 1px solid black;
	        margin: 2px 10px;
	    }

	    label, p, table{
	    	margin: 0 10px;
	    }

	    table{
	        width: 50%;
	        margin-bottom: 20px;
			border-collapse: collapse;
	    }
	    table, th, td{
	        border: 1px solid #cdcdcd;
	    }
	    table th, table td{
	        padding: 10px;
	        text-align: left;
	    }

	</style>

</head>

<body>
	<form>
		<p>userID</p>
		<br>
		<input type="text" name="userID" id="uID" placeholder="userID" readonly>
		<input type="text" name="userName" id="uName" placeholder="UserName" >
		<input type="text" name="userOccupation" id="uOccupation" placeholder="UserOccupation" >


		<input type="button" name="submit" class="addRow" value="Add">

		<br><br>


		<label for="preferences">Sort by:</label>

		<select name="preference" id="preferences" >
		    <option value="userID">UserID</option>
		    <option value="userName">UserName</option>
		    <option value="userOccupation">UserOccupation</option>
		</select>



	</form>

	<table id="dataTable">
		<tbody>
		  	
		 </tbody> 
	</table>



	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script>
		var c = 0;
		var entries = [];

		//Add new row to the Table
		$(document).ready(function(){
	        $(".addRow").click(function(){
	        	var rowCount = $("tbody tr").length;
	            var userName = $("#uName").val();
	            var userOccupation = $("#uOccupation").val();

	            var entry = {id: rowCount + 1, name: userName, occupation: userOccupation};

	            //add data object into array 
	            entries.push(entry);

	            var markup = "<tr><td>" + (rowCount + 1) + "</td><td>" + userName + "</td><td>" + userOccupation + "</td></tr>";

	            $("tbody").append(markup);
	            $("#uID").val(rowCount+2);
	        });
	        
    	});   

		//set next userID
    	$(document).ready(function(){
    		var rowCount = $("table tr").length;
    		$("#uID").val(rowCount+1);
    	});

	    //sorting according to preferences	
	    $(document).ready(function(){
		        $('#preferences').on('change', function() {
	  				var sortOption = $(this).val();

	  				var i, x, y, sort;

	  				var switching = true;

	  				while (switching) {
	                    switching = false;

	                    // Loop to go through all entries
	                    for (i = 0; i < (entries.length-1); i++) {
	                        var Switch = false;
	  				

	                        if (sortOption === 'userID'){
	                        	x = entries[i].id;
	                        	y = entries[i + 1].id;
		  
		                        // Check if 2 rows need to be switched
		                        if (x > y){
		  
		                            // If yes, mark Switch as needed and break loop
		                            Switch = true;
		                            break;
		                        }

	                        } else if (sortOption === 'userName'){
	                        	x = entries[i].name;
	                        	y = entries[i + 1].name;
		  					
		                        // Check if 2 rows need to be switched
		                        if (x.toLowerCase() > y.toLowerCase())
		                            {
		  
		                            // If yes, mark Switch as needed and break loop
		                            Switch = true;
		                            break;
		                        }
	                        } else {
	                        	x = entries[i].occupation;
	                        	y = entries[i + 1].occupation;
		  
		                        // Check if 2 rows need to be switched
		                        if (x.toLowerCase() > y.toLowerCase())
		                            {
		  
		                            // If yes, mark Switch as needed and break loop
		                            Switch = true;
		                            break;
		                        }
	                        }
	                        
	                    }

	                    if (Switch) {
	                        // Function to switch rows and mark switch as completed

	                       	var temp = entries[i];
	                       	entries[i] = entries[i+1];
	                       	entries[i+1] = temp;
	                       	sort =+ 1;
	                        switching = true;
	                    }

	                }

	                //Remove all rows in table and populate it if the array has changed
	                if(sort > 0){

	                	$("table tr").remove(); 

		                for(var c = 0; c< entries.length; c++){
		                   	var markup = "<tr><td>" + entries[c].id + "</td><td>" + entries[c].name + "</td><td>" + entries[c].occupation + "</td></tr>";

			            	$("tbody").append(markup);
		                }
	                }

	  			});



    	});   
     
   
		
	</script>

	

</body>

</html>